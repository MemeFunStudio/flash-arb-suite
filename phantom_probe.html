<!doctype html><html lang="en"><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Phantom Injection Probe</title>
<style>body{background:#0f1221;color:#e8eaf6;font:14px ui-sans-serif,system-ui,Segoe UI,Roboto,Arial;margin:0;padding:20px}.card{background:#171a2e;border:1px solid #242845;border-radius:14px;padding:16px;max-width:800px;margin:auto}.mono{font-family:ui-monospace,Menlo,Consolas,monospace}.ok{color:#36d399}.bad{color:#ff5d5d}button{cursor:pointer;padding:10px 12px;border-radius:10px;border:1px solid #2b2f4a;background:#1b2040;color:#e8eaf6}.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}</style>
<div class="card"><h2>Phantom Injection Probe</h2><div class="row"><b>Origin:</b> <span class="mono" id="origin"></span></div><div class="row"><b>window.phantom?.solana:</b> <span id="det" class="mono bad">no</span></div><div class="row"><b>window.solana.isPhantom:</b> <span id="is" class="mono">—</span></div><div class="row"><b>Provider keys:</b> <span id="keys" class="mono">—</span></div><div class="row"><button id="connect">Try Connect</button> <span id="status" class="mono"></span></div></div>
<script>const $=id=>document.getElementById(id);$('origin').textContent=location.origin||location.protocol;function prov(){return(window.phantom&&window.phantom.solana)?window.phantom.solana:((window.solana&&window.solana.isPhantom)?window.solana:null);}function refresh(){const p=prov();const ok=!!p;$('det').textContent=ok?'yes':'no';$('det').className=ok?'mono ok':'mono bad';$('is').textContent=ok?String(!!p.isPhantom):'—';$('keys').textContent=ok?Object.keys(p).join(', '):'—';return p;}window.addEventListener('load',refresh);document.addEventListener('visibilitychange',()=>{if(!document.hidden)refresh();});$('connect').onclick=async()=>{const p=refresh();if(!p){$('status').textContent='provider not found';return;}try{const r=await p.connect({onlyIfTrusted:false});$('status').textContent='connected: '+r.publicKey.toString();}catch(e){$('status').textContent='connect error: '+(e.message||e);} };</script></html>
